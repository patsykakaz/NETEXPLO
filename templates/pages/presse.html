{% extends "base.html" %}
{% load i18n static pages_tags mezzanine_tags blog_tags keyword_tags %}

{% block meta_keywords %}{% endblock %}
{% block meta_description %}{% endblock %}

{% block extra_css %}
{# <link rel="stylesheet" href="{% static "css/section.css" %}"> #}
<link rel="stylesheet" href="{% static "css/presse.css" %}">
<style type="text/css">
    #cat_contact{
        {% if LANGUAGE_CODE == 'fr' %}
        left: calc(50% - 92px);
        {% else %}
        left: calc(50% - 67px);
        {% endif %}
        border: none;
        border-radius: 0;
        background-color: {{ customColor }};
    }
    #mediaAssets h5, #mediaAssets h3{
        color: {{ PressFiles_container.color }};
        border-color: {{ PressFiles_container.color }};
    }
</style>
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
    $(document).ready(function(){
        $('#illustration_container').css('max-height',$(window).height());
        if($('#illustration').width()>$(window).width()){
            console.log('move to the right');
            $('#illustration').css('right',($('#illustration').width()-$(window).width())/2);
        }else{
            $('#illustration').css('right',0);
        }
        if($('#illustration').height()>$(window).height()){
            $('#illustration').css('bottom',($('#illustration').height()-$(window).height())/2);
        }else{
            $('#illustration').css('bottom',0);
        }
        if($(window).width()>990){
            $('.middlize').each(function(){
                referent = $(this).parent();
                refH = referent.height();
                // console.log(refH);
                // console.log(refH);
                x = (refH - $(this).height())/2;
                console.log($(this).height());
                console.log(x);
                $(this).css('margin-top',x);
            });
        }else{
            $('.middlize').css('margin-top',0);
        }
        MAH = $('.mediaAsset_box').width()*.75;
        $('.mediaAsset_box').height(MAH);
        $('.mediaAsset_box').each(function(){
            target = $(this).children('a');
            target.css('margin-top',(MAH-target.height())/2);
        });
    });
    $(window).resize(function(){
        $('#illustration_container').css('max-height',$(window).height());
        if($('#illustration').width()>$(window).width()){
            $('#illustration').css('right',($('#illustration').width()-$(window).width())/2);
        }else{
            $('#illustration').css('right',0);
        }
        if($('#illustration').height()>$(window).height()){
            $('#illustration').css('bottom',($('#illustration').height()-$(window).height())/2);
        }else{
            $('#illustration').css('bottom',0);
        }
        if($(window).width()>990){
            $('.middlize').each(function(){
                referent = $(this).parent();
                refH = referent.height();
                // console.log(target.length);
                // console.log(refH);
                x = (refH - $(this).height())/2;
                $(this).css('margin-top',x);
            });
        }else{
            $('.middlize').css('margin-top',0);
        }
        MAH = $('.mediaAsset_box').width()*.75;
        $('.mediaAsset_box').height(MAH);
        $('.mediaAsset_box').each(function(){
            target = $(this).children('a');
            target.css('margin-top',(MAH-target.height())/2);
        });
    });
</script>
{% endblock %}

{% block meta_title %}{% endblock %}
{% block title %}{% endblock %}

{% block main %}

<div id='header' class='container'>
    <div id='illustration_container'>
        <img id='illustration' src='{{ MEDIA_URL }}{% thumbnail Target.illustration 1600 0 %}' alt='illustration section' />
        <div id='illustration_overlay'>
            {# <h1 id='' class='text-center'>{{ Target.title }}</h1> #}
            <btn id='cat_contact' class='btn btn-lg btn-default'>
                <a href='mailto:'>
                {% if LANGUAGE_CODE == 'fr' %}
                    Nous contacter
                {% else %}
                    Contact us
                {% endif %}
                </a>
            </btn>
        </div>
    </div>

    <div class='slot' style='margin-bottom:0; background-color:{{ Target.caption_color }}'>
        <div id='caption' class='row'>
            <div class='middlize col-md-3 col-md-offset-1 col-sm-10 col-sm-offset-1 col-xs-10 col-xs-offset-1 text-center'>
                <img src='{% static "img/utils/pressbook.jpg" %}' />
            </div>
            <div class='middlize col-md-6 col-md-offset-1 col-sm-10 col-sm-offset-1 col-xs-12 text-justify' style='color:{{ Target.text_color }}'>
                <h3 class='text-center'>
                    Pressbook
                </h3>
                {% if Target.sub_title %}
                    <h5 class='text-center'>
                        {{ Target.sub_title|upper }}
                    </h5>
                {% endif %}
                {{ Target.caption|richtext_filters|safe }}
                {% if LANGUAGE_CODE == 'fr' %}
                    Téléchargez le dossier
                {% else %}
                    Download the folder
                {% endif %}
            </div>
        </div>
    </div>
</div>


<div id='main' class='container'>

    {% if blogPosts %}
    <div id='blogSpace'  class='slot'>
        <div class='row'>
            <div class='col-md-10 col-md-offset-1 col-sm-12 col-xs-12 col-xs-offset-0'>
                <h3 class='text-center' style='color:{{ customColor }};'>
                    News
                </h3>
                {% for element in blogPosts %}
                    <div class='row news_box'>
                        <div class='col-md-4 col-md-offset-1 col-sm-4 col-sm-offset-1 col-xs-12 col-xs-offset-0'>
                            <a href='{{ element.get_absolute_url }}'>
                                <img class='img-thumbnail' src='{{ MEDIA_URL }}{% thumbnail element.featured_image 600 400 %}' alt='illustration news' />
                            </a>
                        </div>
                        <div class='col-md-5 col-md-offset-1 col-sm-4 col-sm-offset-1 col-xs-12 col-xs-offset-0'>
                            <h6 class='text-center'>
                                {# <i class='fa fa-genderless'></i> #}
                                {{ element.title }}
                            </h6>
                            <div class='text-justify'>
                                {{ element.description_from_content|safe }}
                            </div>
                            <div class='text-center'>
                                <a style='margin-top:10px; color: {{ customColor }};' href='{{ element.get_absolute_url }}'>
                                    <i class='fa fa-lg fa-ellipsis-h'></i>
                                    {% if LANGUAGE_CODE == 'fr' %}
                                        Voir plus 
                                    {% else %}
                                        See more
                                    {% endif %}
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <div id='mediaAssets' class='slot' style='background-color:{{ PressFiles_container.caption_color }};'>
        <div class='row'>
            <div class='col-md-10 col-md-offset-1 col-sm-12 col-xs-12 col-xs-offset-0'>
                <h3 class='text-center'>
                    Media assets
                </h3>
                <div id='logos'>
                    <h5>Logos</h5>
                    <div class='row'>
                    {% for element in M_A_logo %}
                        <div class='col-md-4 col-sm-4 col-xs-6'>
                            <div class='mediaAsset_box'>
                                <a href='{{ element.file.url }}' target='blank'>
                                {% if element.image_file %}
                                    <img src='{{ MEDIA_URL }}{% thumbnail element.image_file 400 300 %}' />
                                {% else %}
                                    {% include "netexplo.svg" %}
                                {% endif %}
                                </a>
                            </div>
                            <div class='mediaAsset_caption text-center'>
                                {{ element.title }}
                                <a style='position:relative; left:5px; color:{{ PressFiles_container.color }};' href='{{ element.file.url }}' target='blank'>
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class='fa fa-cloud-download fa-stack-1x fa-inverse'></i>
                                    </span>
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                    </div>
                </div>
                <div id='photos'>
                    <h5>Photos</h5>
                    <div class='row'>
                    {% for element in M_A_photo %}
                        <div class='col-md-4 col-sm-4 col-xs-6'>
                            <div class='mediaAsset_box'>
                                <a href='{{ element.file.url }}' target='blank'>
                                {% if element.image_file %}
                                    <img src='{{ MEDIA_URL }}{% thumbnail element.image_file 400 300 %}' />
                                {% else %}
                                    {% include "netexplo.svg" %}
                                {% endif %}
                                </a>
                            </div>
                            <div class='mediaAsset_caption text-center'>
                                {{ element.title }}
                                <a style='position:relative; left:5px; color:{{ PressFiles_container.color }};' href='{{ element.file.url }}' target='blank'>
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class='fa fa-cloud-download fa-stack-1x fa-inverse'></i>
                                    </span>
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                    </div>
                </div>
                <div id='videos'>
                    <h5>
                        {% if LANGUAGE_CODE == 'fr' %}Vidéos{% else %}Videos{% endif %}
                    </h5>
                    <div class='row'>
                    {% for element in M_A_video %}
                        <div class='col-md-4 col-sm-4 col-xs-6'>
                            <div class='mediaAsset_box'>
                                <a href='{{ element.file.url }}' target='blank'>
                                {% if element.image_file %}
                                    <img src='{{ MEDIA_URL }}{% thumbnail element.image_file 400 300 %}' />
                                {% else %}
                                    {% include "netexplo.svg" %}
                                {% endif %}
                                </a>
                            </div>
                            <div class='mediaAsset_caption text-center'>
                                {{ element.title }}
                                <a style='position:relative; left:5px; color:{{ PressFiles_container.color }};' href='{{ element.file.url }}' target='blank'>
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class='fa fa-cloud-download fa-stack-1x fa-inverse'></i>
                                    </span>
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
