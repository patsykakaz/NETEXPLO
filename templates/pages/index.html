{% extends "base.html" %}
{% load i18n static pages_tags mezzanine_tags blog_tags keyword_tags %}

{% block meta_keywords %}NETEXPLO{% endblock %}
{% block meta_description %}OBSERVATOIRE{% endblock %}


{% block extra_css %}
<link rel="stylesheet" href="{% static "css/index.css" %}">
<style type="text/css">
    #main .slot{
        background-color: {{ Home.color_caption }};
        color: {{ Home.color_caption_text }}
    }
</style>
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
    $(document).ready(function(){
        $('#carousel').css('max-height',$(window).height());
        if($(window).width()>991 && $('#main.absolute').length){
            $('footer').css('top',$(window).height()+$('#main').outerHeight());
        }
        $('.carousel').carousel({
            interval: {{ Home.slider_timer }}, 
            pause: null, 
            wrap: true, 
            keyboard: true, 
        })
    });
    $(window).resize(function(){
        $('#carousel').css('max-height',$(window).height());
        if($(window).width()>991 && $('#main.absolute').length){
            $('footer').css('top',$(window).height()+$('#main').outerHeight());
        }
    });
</script>
{% endblock %}

{% block meta_title %}{% trans "Home" %}{% endblock %}
{% block title %}{% trans "Home" %}{% endblock %}

{# {% block breadcrumb_menu %} #}
{# <li class="active">{% trans "Home" %}</li> #}
{# {% endblock %} #}

{% block main %}

{% if Home.video %}
    <div id='video_layer'>
        {% if Home.video %}
        <video id="bgvid" playsinline autoplay muted loop poster="{{ MEDIA_URL }}{{ Home.video.illustration_alt }}" id="illustration video alt">
            {# <source src="polina.webm" type="video/webm"> #}
            <source src="{{ MEDIA_URL }}{{ Home.video.file }}" type="video/mp4">
        </video>
        {% endif %}
    </div>
{% else %} 
    <div id='carousel_container'>
    <div id="carousel" class="carousel slide carousel-fade" data-ride="carousel">
        <!-- Indicators -->
        {# <ol class="carousel-indicators"> #}
            {# {% for element in HomeX_data.inlines %} #}
                {# <li data-target="#carousel" data-slide-to="{{ forloop.counter0 }}" {% if forloop.counter0 == 0 %}class="active" {% endif %}></li> #}
            {# {% endfor %} #}
        {# </ol> #}
        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">
            {% for element in Home.captions %}
                <div class="item {% if forloop.counter0 == 0 %}active{% endif %}">
                    <a {% if not element.lien %}href='javascript:void(0)'{% else %} href='{{ element.lien }}'{% endif %}
                        {% if element.external %}target='blank'{% endif %} >
                        <img src='{{ MEDIA_URL }}{{ element.image }}' alt='illustration {{ element }}'>
                    </a>
                </div>
            {% endfor %}
        </div>
        <!-- Controls -->
        {# <a class="left carousel-control" href="#carousel" role="button" data-slide="prev"> #}
            {# <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> #}
            {# <span class="sr-only">Previous</span> #}
        {# </a> #}
        {# <a class="right carousel-control" href="#carousel" role="button" data-slide="next"> #}
            {# <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span> #}
            {# <span class="sr-only">Next</span> #}
        {# </a> #}
        <div id='carousel_overlay'>
        </div>
    </div>
    </div>
{% endif %}

<div id='main'>
    <div class='slot container'>
        <div class='row'>
            <div class='col-md-10 col-md-offset-1 col-xs-12 col-xs-offset-0 text-justify'>
                {% if Home.sub_title %}
                <h3 class='text-center' style='color: {{ customColor }};'>{{ Home.sub_title|upper }}</h3>
                {% endif %}
                {{ Home.caption|richtext_filters|safe }}
            </div>
        </div>
    </div>
</div>


{% endblock %}
